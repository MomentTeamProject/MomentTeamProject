<?xml version="1.0" encoding="UTF-8"?>

<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">



<mapper namespace="mypage.mapper">


	<select id="total" resultType="Integer">
		select count(*) from m_board where b_userid =#{userid}
	</select>

		

	<select id="mylist" resultType="web.myPage.MyPageVO">
	SELECT b.*
	FROM (select rownum no, b.* from (select * from m_board where b_userid = #{userid}) b order by no desc) b
	where no between #{beginList} and #{endList}
	</select>
	
	
	<select id="ddabongtotal" resultType="Integer">	   
	 select DISTINCT count(*) from m_favorite where f_userid =#{userid} and f_ddabong='Y'		
	</select>
	
	
	<select id="myddabong" resultType="web.myPage.MyPageVO">
      <!--select DISTINCT b.*,u.*
		from m_board b, m_favorite f, m_user u
		where b.b_no = f.f_bno and b.b_userid = u.u_userid
		and f.f_bno in (select f_bno from m_favorite WHERE
		f_userid=#{userid} and f_ddabong='Y')
		 -->
				 
		select DISTINCT *
		from (select DISTINCT b.*,u.* from m_board b, m_favorite f, m_user u 
		where b.b_no = f.f_bno and b.b_userid = u.u_userid	and f.f_bno in (select f_bno from m_favorite WHERE f_userid=#{userid} and f_ddabong='Y'))
		where where no between #{beginList} and #{endList} 
		
	</select>
	
	
	

	<select id="myfavorite" resultType="web.myPage.MyPageVO">
		select DISTINCT b.*,u.*
		from m_board b, m_favorite f, m_user u
		where b.b_no = f.f_bno and b.b_userid = u.u_userid
		and f.f_bno in (select f_bno from m_favorite WHERE f_userid=#{userid} and f_favorites='Y')
	</select>

	
	<delete id="mylistdelete">
		delete from m_board where b_no = #{id}	
	</delete>
	

</mapper>